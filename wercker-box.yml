name: cordova
version: 0.0.5
inherits: wercker/ubuntu12.04-webessentials@1.0.4
type: service
platform: ubuntu@12.04
description: wercker box for building, testing and deploying cordova apps for android
keywords:
  - cordova
  - android
  - phonegap
  - testflight
package:
  - cordova@3.5.0
  - nodejs@0.10.31
  - grunt-cli@0.1.13
script: |
  sdk_version="23.0.2"

  profile="/etc/environment"

  cd $HOME

  # Add repositories
  sudo add-apt-repository -y ppa:chris-lea/node.js
  sudo add-apt-repository -y ppa:webupd8team/java
  sudo apt-get update -y

  # Install nodejs
  sudo apt-get install -y nodejs

  # Install java
  echo debconf shared/accepted-oracle-license-v1-1 select true | sudo debconf-set-selections
  echo debconf shared/accepted-oracle-license-v1-1 seen true | sudo debconf-set-selections
  sudo apt-get install -y oracle-java8-installer -qq

  # Install ant
  sudo apt-get install ant ant-contrib -y

  sudo npm install -g grunt-cli
  sudo npm install -g cordova

  source $WERCKER_SOURCE_DIR/install-sdk.sh

  echo "Versions"

  node --version
  npm --version
  java -version
  ant -version
  grunt --version
  cordova --version

  echo "Complete"
  cat $profile
  cd $HOME
  du -h
